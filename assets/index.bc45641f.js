import{j as w,r as u,M as N,J as F,F as M,R as E,a as j}from"./vendor.16d9a300.js";const R=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}};R();var L="assets/desktop.86032ef7.jpg";const r=w.exports.jsx,p=w.exports.jsxs,v=w.exports.Fragment;function x(t,e){return{d:e,t:t.type,v:t.name,c:t.children?t.children.map(n=>x(n,e+1)):[]}}const T=({treeNodes:t})=>{const e=u.exports.useRef(null),n=u.exports.useRef();return u.exports.useEffect(()=>{if(n.current)n.current.setData(x(t[0],0)),n.current.fit();else{const c=N.create(e.current,{},x(t[0],0));n.current=c}},[t]),r("svg",{ref:e,className:"h-full w-full"})};async function y(t,e=0){if(t.kind==="file")return Promise.resolve({name:t.name,type:"file"});{if(e>7)return;const n={name:t.name,type:"folder",children:[]};for await(const c of t.values()){const s=await y(c,e+1);s&&n.children.push(s)}return n}}function k(t,e,n){const c=t.on(e!=null?e:t.rootTopicId).add({title:n.name}).cid();if(n.children)for(const s of n.children)k(t,c,s)}const D=t=>{const[e,n]=u.exports.useState([]),c=u.exports.useRef(),s=async()=>{try{const l=await window.showDirectoryPicker();c.current=l,o()}catch{}},o=async()=>{const l=await y(c.current);l.type="root",n([l])};return p("div",{className:"flex flex-col h-full p-4",children:[p("div",{className:"flex items-center",children:[r("button",{className:"rounded bg-blue-500 h-8 text-white w-30",onClick:s,children:"\u9009\u62E9\u76EE\u5F55"}),r("button",{className:"rounded bg-blue-500 h-8 text-white ml-8 w-30",onClick:o,children:"\u5237\u65B0"}),r("button",{className:"rounded bg-blue-500 h-8 text-white ml-8 w-30",onClick:()=>{const l=new window.Workbook,h=new window.Topic({sheet:l.createSheet("folders",c.current.name)});for(const a of e[0].children)k(h,null,a);const d=new window.Dumper({workbook:l}).dumping(),m=new F;for(const a of d)m.file(a.filename,a.value);m.generateAsync({type:"blob"}).then(function(a){M.saveAs(a,`${c.current.name}.xmind`)})},children:"\u5BFC\u51FAXMind"})]}),r("div",{className:"flex-1 overflow-auto",children:e.length>0&&r(T,{treeNodes:e})})]})};var A="assets/icon.c010ef75.jpg";const $=[{name:"\u76EE\u5F55\u8F6C\u8111\u56FE",app:D,icon:A}],B=({visible:t,onClose:e,title:n,icon:c,children:s,defaultMaximized:o=!0,defaultSize:i=[640,480],beforeClose:l})=>{const[[h,f],d]=u.exports.useState([0,0]),m=()=>{d([0,0])},a=async()=>{await(l==null?void 0:l())!==!1&&(e==null||e())};return u.exports.useEffect(()=>{t&&m()},[t]),t?p("div",{className:"absolute bg-white flex flex-col items-start rounded shadow max-w-screen max-h-[calc(100vh - 48px)]",style:o?{width:"100vw",height:"calc(100vh - 48px)",left:`${h}px`,top:`${f}px`}:{width:i[0],height:i[1],left:`${h}px`,top:`${f}px`},children:[p("div",{className:"flex h-[26px] w-full pl-6 items-center",children:[c&&r("img",{src:c,className:"h-[14px] w-[14px]"}),r("span",{className:"text-sm text-black ml-1",children:n}),r("div",{className:"flex ml-auto items-center",children:r("div",{className:"flex w-9 items-center justify-center group",onClick:a,children:r("svg",{className:"h-2 text-dark-300 w-2 group-hover:w-3 group-hover:h-3 group-hover:text-dark-600 ",viewBox:"0 0 24 24",children:r("g",{fill:"none",children:r("path",{d:"M4.397 4.554l.073-.084a.75.75 0 0 1 .976-.073l.084.073L12 10.939l6.47-6.47a.75.75 0 1 1 1.06 1.061L13.061 12l6.47 6.47a.75.75 0 0 1 .072.976l-.073.084a.75.75 0 0 1-.976.073l-.084-.073L12 13.061l-6.47 6.47a.75.75 0 0 1-1.06-1.061L10.939 12l-6.47-6.47a.75.75 0 0 1-.072-.976l.073-.084l-.073.084z",fill:"currentColor"})})})})})]}),r("div",{className:"flex-1 w-full overflow-auto",children:s})]}):null},O=({className:t,title:e,icon:n,appTrigger:c,children:s,trigger:o="dblclick",beforeStart:i,onStarted:l,beforeClose:h,onClosed:f})=>{const[d,m]=u.exports.useState(!1),a=b=>{b===o&&(i==null||i(),m(!0))},g=()=>{m(!1)};return u.exports.useEffect(()=>{d?l==null||l():f==null||f()},[d,l,f]),p(v,{children:[r("div",{className:t,onClick:()=>a("click"),onDoubleClick:()=>a("dblclick"),children:c}),r(B,{title:e,visible:d,icon:n,beforeClose:h,onClose:g,children:s})]})},P=t=>r("div",{className:"flex flex-col flex-wrap",children:$.map(e=>r(O,{title:e.name,icon:e.icon,className:"flex flex-col h-[86px] m-1 w-19 items-center justify-center",appTrigger:p(v,{children:[r("img",{src:e.icon,className:"h-9 w-9"}),r("div",{className:"mt-1 text-center text-sm text-shadow text-[#fafafa]",children:e.name})]}),children:r(e.app,{})},e.name))}),z=t=>r("div",{className:"flex bg-[rgba(243,243,243,0.85)] h-12 text-black w-screen bottom-0 z-100 absolute items-center",style:{backdropFilter:"saturate(3) blur(20px)"}}),X=({children:t})=>p("div",{className:"h-screen w-screen",children:[r("div",{className:"bg-cover top-0 right-0 bottom-0 left-0 -z-1 fixed",style:{backgroundImage:`url("${L}")`}}),r(P,{}),r(z,{}),t]});E.render(r(j.StrictMode,{children:r(X,{})}),document.getElementById("root"));
